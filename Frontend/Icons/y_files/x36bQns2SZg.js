/*!CK:2286999553!*//*1413495496,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["knJ9f"]); }

__d("EditComposerAttachment",["cx","CSS","csx","DOM","Event","JSXDOM","LitestandShareAttachment","Parent","Run","Style"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=null,r=null,s=null,t=null,u=null,v=0,w=null,x=null,y=false,z=null,aa=null,ba=null,ca=null,da=null,ea=null,fa=0,ga=null,ha=null,ia=null,ja=null,ka=false,la=null,ma=15,na=250,oa=70,pa=100,qa={init:function(ra,sa,ta){v=0;ba=sa;r=ra;var ua=j.scry(r,"._2r3x")[0];fa=ba.length;u=n.byClass(r,"_4tbq");ia=j.scry(u,"._6m2")[0];la=j.scry(r,"._6m6")[0];w=j.scry(r,"._6m7")[0];if(w){var va=j.scry(w,"._5cy7")[0];z=va.firstChild.nodeValue;}var wa=j.scry(ua,"._3m6-")[0],xa=j.scry(ua,"._3c21")[0],ya="_51cc",za="_59ap",ab="_5cwb",bb="_po-",cb="_3e-t",db=null,eb=null,fb=null;s=j.scry(r,"._3e-u")[0];if(fa){db=j.scry(ia,"._k7m")[0];eb=j.scry(ia,"._3ekx")[0];ca=l.input({name:"attachment[params][images][0]",type:"hidden"});j.appendContent(u,ca);ca.value=ba[0][0];fb=l.input({name:"composer_metrics[image_selected]",type:"hidden",value:"0"});j.appendContent(u,fb);var gb=n.byClass(u,"_9u");q=j.scry(gb,"._9s")[0];if(h.hasClass(ia,za)){h.addClass(q,bb);h.addClass(s,cb);}t=k.listen(s,'click',function(){j.scry(r,"._6ks").forEach(function(mb){j.remove(mb);});h.addClass(ia,"_6m4");h.addClass(ia,ab);h.removeClass(ia,ya);h.removeClass(ia,za);j.remove(s);var kb=j.scry(r,"._146d")[0];h.addClass(kb,'hidden_elem');ca.value="";p.set(q,'top','6px');if(w){var lb=j.scry(w,"._5cy7")[0];j.setContent(lb,z);}m.init(r);});}else j.remove(s);var hb=j.scry(r,"._146d")[0];if(fa<=1){h.addClass(hb,'hidden_elem');}else{h.addClass(hb,'UIThumbPagerControl_First');da=j.scry(r,'.UIThumbPagerControl_Button_Left')[0];ga=j.scry(r,'.UIThumbPagerControl_Button_Right')[0];var ib={Right:0,Left:1},jb=function(kb){var lb=j.scry(r,"._6ks")[v];h.addClass(lb,'hidden_elem');if(kb==ib.Left){v--;}else if(kb==ib.Right)v++;lb=j.scry(r,"._6ks")[v];if(ba[v][1]){h.removeClass(ia,ya);h.removeClass(ia,ab);h.addClass(ia,za);h.addClass(q,bb);h.addClass(s,cb);}else if(ba[v][2]){h.addClass(ia,ya);h.addClass(ia,ab);h.removeClass(ia,za);h.removeClass(q,bb);h.removeClass(s,cb);}else{h.removeClass(ia,ya);h.addClass(ia,ab);h.removeClass(ia,za);h.removeClass(q,bb);h.removeClass(s,cb);}h.removeClass(lb,'hidden_elem');j.remove(eb);j.remove(db);j.appendContent(wa,db);if(h.hasClass(ia,za)){j.appendContent(wa,eb);}else j.appendContent(xa,eb);if(w){var mb=j.scry(w,"._5cy7")[0];j.setContent(mb,z);}m.init(r);ca.value=ba[v][0];fb.value=v;if(v===0){h.addClass(hb,'UIThumbPagerControl_First');h.removeClass(hb,'UIThumbPagerControl_Last');}else if(v+1===fa){h.addClass(hb,'UIThumbPagerControl_Last');h.removeClass(hb,'UIThumbPagerControl_First');}else{h.removeClass(hb,'UIThumbPagerControl_First');h.removeClass(hb,'UIThumbPagerControl_Last');}};ea=k.listen(da,'click',function(){if(v>0)jb(ib.Left);});ha=k.listen(ga,'click',function(){if(v+1<fa)jb(ib.Right);});}ja=k.listen(la,'click',function(){if(!ka){var kb=this.titleOnChange;this.clickHandler(la,kb,pa);ka=true;}}.bind(this));if(w)x=k.listen(w,'click',function(){if(!y){var kb=this.descriptionOnChange;this.clickHandler(w,kb,na);y=true;}}.bind(this));o.onLeave(function(){x&&x.remove();ja&&ja.remove();ea&&ea.remove();ha&&ha.remove();t&&t.remove();});},clickHandler:function(ra,sa,ta){var ua=j.scry(ra,"._5cy7")[0];aa=l.textarea({maxlength:ta,value:ua.firstChild.nodeValue});if(h.hasClass(ra,"_6m7")){var va=Math.min(m.getNumDescriptionLines(r)*ma,oa);p.set(aa,'height',va+'px');}if(h.hasClass(ia,"_59ap")||h.hasClass(ia,"_6m4")){h.addClass(aa,"_1r8i");}else h.addClass(aa,"_4xe4");aa.onblur=this.onBlur;aa.onchange=sa;j.replace(ua,aa);aa.focus();aa.select();},onBlur:function(){var ra=l.span({class:"_5cy7"},aa.value);j.insertBefore(aa,ra);j.remove(aa);m.init(r);y=false;ka=false;},titleOnChange:function(){var ra=j.scry(u,'input[name="attachment[params][title]"]')[0];if(!ra){ra=l.input({name:"attachment[params][title]",type:"hidden"});j.appendContent(u,ra);}ra.value=aa.value;},descriptionOnChange:function(){var ra=j.scry(u,'input[name="attachment[params][summary]"]')[0];if(!ra){ra=l.input({name:"attachment[params][summary]",type:"hidden"});j.appendContent(u,ra);}ra.value=aa.value;z=aa.value;}};e.exports=qa;},null);
__d("EndOfFeed",["csx","DOM","DOMScroll","Event","LitestandStreamLoader"],function(a,b,c,d,e,f,g,h,i,j,k){function l(m){"use strict";this.$EndOfFeed0=m;var n=h.find(m,"._2-gd");j.listen(n,'click',function(){k.forceNewFetch();i.scrollToTop(true);});}e.exports=l;},null);