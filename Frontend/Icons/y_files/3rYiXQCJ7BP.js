/*!CK:1583401692!*//*1424145820,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["WoMep"]); }

__d("PrivacyCustomTypeahead",["Typeahead"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l,m,n,o){"use strict";g.call(this,k,l,m,n);this._bootstrapExclusion=JSON.parse(o);}j.prototype.containsBootstrapExclusion=function(k){"use strict";var l=parseInt(k,10);return this._bootstrapExclusion.indexOf(l)>-1;};j.prototype.addBootstrapExclusion=function(k){"use strict";var l=parseInt(k,10);this._bootstrapExclusion.push(l);};j.prototype.removeBootstrapExclusion=function(k){"use strict";var l=parseInt(k,10),m=this._bootstrapExclusion.indexOf(l);if(m>-1)this._bootstrapExclusion.splice(m,1);};e.exports=j;},null);
__d("PrivacyCustomControl",["CSS","Button","DOM","Event","copyProperties","PrivacyCustomDialogConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(t){return t.tokens.length>0&&t.input.value.trim().length===0;}function n(t){return t.input.value.trim().length===0;}function o(t,u){var v=i.find(u.input.form,'button'),w=m(t)&&n(u);h.setEnabled(v,w);}function p(){}k(p,{init:function(t,u,v,w,x,y,z){t.input.blur();var aa=function(ea,fa){if(fa){t.typeahead.removeBootstrapExclusion(ea);}else t.typeahead.addBootstrapExclusion(ea);},ba=JSON.parse(w.value),ca=function(ea){var fa=((ea!==null)<<1)+(ba.length>0);i.setContent(z,l.CUSTOM_DISCLAIMER_TEXT[fa]);g.show(z);},da=function(){var ea=q(t),fa=r(t);if(ea&&fa){ca(ea);return;}else if(ea||fa)for(var ga=0;ga<t.tokens.length;ga++)if(t.tokens[ga].info.type=='user'||t.tokens[ga].info.type=='friendlist'){ca(ea);return;}g.hide(z);};t.input.onkeyup=function(event){o(t,u);};u.input.onkeyup=function(event){o(t,u);};t.subscribe('addToken',function(ea,fa){s(u,fa.info.uid);if(fa.info.uid==l.CUSTOM_DIALOG_TOKEN_FOF){aa(fa.info.uid,false);v.value=l.CUSTOM_DIALOG_FOF;}else if(fa.info.uid==l.CUSTOM_DIALOG_TOKEN_FRIENDS){aa(fa.info.uid,false);if(!q(t))v.value=l.CUSTOM_DIALOG_FRIENDS;}else if(fa.info.type==l.CUSTOM_TOKEN_TYPE_GROUP){aa(fa.info.uid,false);ba.push(Number(fa.info.uid));w.value='['+ba.join()+']';if(q(t)||r(t)){da();return;}if(t.tokens.length==ba.length){v.value=l.CUSTOM_DIALOG_ONLY_ME;}else v.value=l.CUSTOM_DIALOG_SOME_FRIENDS;}else if(!q(t)&&!r(t))v.value=l.CUSTOM_DIALOG_SOME_FRIENDS;if(y!==null)g.conditionShow(y,(q(t)||r(t)));da();if(n(u)){var ga=i.find(t.input.form,'button');h.setEnabled(ga,true);}});t.subscribe('removeToken',function(ea,fa){var ga=fa.info.type==l.CUSTOM_TOKEN_TYPE_GROUP;if(ga){var ha=ba.indexOf(parseInt(fa.info.uid,10));ba.splice(ha,1);w.value=ba;}if(ga||fa.info.type==l.CUSTOM_TOKEN_TYPE_FRIEND_OR_FOF)aa(fa.info.uid,true);if(t.tokens.length===0){v.value=l.CUSTOM_DIALOG_ONLY_ME;var ia=i.find(t.input.form,'button');h.setEnabled(ia,false);}else if(!q(t)&&r(t)){v.value=l.CUSTOM_DIALOG_FRIENDS;}else if(t.tokens.length==ba.length){v.value=l.CUSTOM_DIALOG_ONLY_ME;}else if(!q(t)&&!r(t))v.value=l.CUSTOM_DIALOG_SOME_FRIENDS;if(y!==null&&(!q(t)&&!r(t)))g.hide(y);da();});u.subscribe('addToken',function(ea,fa){s(t,fa.info.uid);g.show(x);if(m(t)){var ga=i.find(t.input.form,'button');h.setEnabled(ga,true);}});u.subscribe('removeToken',function(ea,fa){g.conditionShow(x,u.tokens.length);});},initDeprecated:function(t,u,v,w,x,y,z){j.listen(t,'change',function(){var ba=t.options[t.selectedIndex];g.conditionShow(u.getElement(),g.hasClass(ba,'showInclusions'));var ca=g.hasClass(x,'explainTags');if(!ca)return;var da=g.hasClass(ba,'expandTag');if(i.scry(x,'.expandCheckbox')[0]){g.conditionShow(i.find(x,'.expandCheckbox'),da);g.show(i.find(x,'.noExpandNotice'));}else{g.conditionShow(i.find(x,'.expandNotice'),da);g.conditionShow(i.find(x,'.noExpandNotice'),!da);}});var aa=function(){var ba=t.options[t.selectedIndex],ca=function(ea){if(!ea)return false;var fa=i.scry(ea,"input");return fa.some(function(ga){return ga.checked;});},da=ca(y);g.conditionShow(z,!g.hasClass(ba,'hideExclusionUnit')||da);};j.listen(t,'change',aa);y&&i.scry(y,"input").forEach(function(ba){j.listen(ba,'change',aa);});u.subscribe('addToken',function(ba,ca){s(v,ca.info.uid);});v.subscribe('addToken',function(ba,ca){s(u,ca.info.uid);g.show(w);});}});var q=function(t){return t.getToken(l.CUSTOM_DIALOG_TOKEN_FOF);},r=function(t){return t.getToken(l.CUSTOM_DIALOG_TOKEN_FRIENDS);},s=function(t,u){var v=t.getToken(u);v&&t.removeToken(v);};e.exports=p;},null);
__d("TypeaheadCustomPrivacyShowSuggestionsOnFocus",["PrivacyCustomDialogConstants","TypeaheadShowResultsOnFocus"],function(a,b,c,d,e,f,g,h){for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){"use strict";if(h!==null)h.apply(this,arguments);}k.prototype.getUidsFromData=function(l){"use strict";var m=l.getAllEntries(),n=[];for(var o in m)if((m[o].type==g.CUSTOM_TOKEN_TYPE_GROUP||m[o].type==g.CUSTOM_TOKEN_TYPE_FRIEND_OR_FOF)&&!this._typeahead.containsBootstrapExclusion(m[o].uid))n.push({uid:m[o].uid,index:m[o].index});n.sort(function(p,q){return p.index-q.index;});return n.map(function(p){return p.uid;});};e.exports=k;},null);