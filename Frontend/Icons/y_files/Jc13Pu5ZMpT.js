/*!CK:1354308720!*//*1424143996,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["P9dwQ"]); }

__d("CollectionsAddNewHub",["AsyncRequest","AsyncResponse","Event","Form","Keys","TimelineSection","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={init:function(o,p,q,r,s){l.callWithSection(r,function(t){this.initImpl(o,p,q,r,s,t.getNode());}.bind(this));},initImpl:function(o,p,q,r,s,t){if(!o)return;var u=o.getCore();o.subscribe('select',function(w,x){if(!x.selected.type.match('addnew'))return;this.createHub(o,x.selected.orig_text||x.selected.text,p,q,r,s,t);}.bind(this));var v=o.getView();i.listen(u.getElement(),'keydown',function(event){if(i.getKeyCode(event)==k.RETURN&&!v.getSelection()){this.createHub(o,u.getValue(),p,q,r,s,t);event.kill();}}.bind(this));},createHub:function(o,p,q,r,s,t,u){var v=o.getCore();v.setEnabled(false);var w=function(){v.reset();v.getElement().blur();v.setEnabled(true);},x=m({title:p,type:q,root_id:u.id,results:o.getData().buildQueryResults(p)},j.serialize(t));new g(r).setData(x).setHandler(w).setErrorHandler(function(y){w();h.defaultErrorHandler(y);}).send();}};e.exports=n;},null);
__d("TimelineCollectionsCuration",["getContextualParent","CSS","Parent","$","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l={hideAppSection:function(m){var n=g(j(m),true),o=['getTimelineUnitFromChildElement','getMedleyAppSectionFromChildElement'];for(var p=0;p<o.length;p++){var q=l[o[p]](n);if(q)return h.hide(q);}},getTimelineUnitFromChildElement:function(m){return i.byClass(m,'fbTimelineUnit');},getMedleyAppSectionFromChildElement:function(m){return i.byClass(m,"_30f");}};e.exports=l;},null);
__d("OGCollectionAddToggle",["CSS","DOM","Event","TimelineCollectionsCuration","csx","cx","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={},o="_91n";function p(r,s,t){g.conditionShow(r,t);g.conditionClass(s,o,t);}var q={initTypeaheadToggleInReport:function(r,s,t){h.prependContent(h.find(j.getTimelineUnitFromChildElement(r),"._5amu"),s);if(n[t]===(void 0)){n[t]=g.hasClass(s,o);}else p(r,s,n[t]);m(i.listen(s,'click',function(u){p(r,s,n[t]=!n[t]);}));}};e.exports=q;},null);
__d("HubsTypeaheadView",["Arbiter","AsyncRequest","ContextualTypeaheadView","CSS","DOM","Event","$","copyProperties","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){for(var p in i)if(i.hasOwnProperty(p))r[p]=i[p];var q=i===null?null:i.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=i;function r(s,t){"use strict";i.call(this,s,t);if(t.allowDedupe)this.subscribe('select',this.selectDuplicates.bind(this));}r.prototype.hide=function(){"use strict";return this.canHide?q.hide.call(this):null;};r.prototype.reset=function(){"use strict";return this.canHide?q.reset.call(this):null;};r.prototype._createFreeFormNode=function(s){"use strict";var t=s;if(this.showCreatePrompt){t=o._("Add \"{partial_name}\"",[o.param("partial_name",s)]);}else if(this.showAltCreatePrompt)t=o._("Create \"{partial_name}\"",[o.param("partial_name",s)]);return {text:t,orig_text:s,type:'addnew calltoaction',uid:'0'};};r.prototype.render=function(s,t,u){"use strict";var v=[],w=Math.max(1,Math.floor(t.length/10));for(var x=w;x<t.length;x++)if(!!t[x].already_added){v.push(t[x]);t.splice(x,1);x--;}t=t.concat(v);if(this.alwaysRender&&s!=='')if(this.allowFreeformEntry){t.push(this._createFreeFormNode(s));}else{var y=s.toLowerCase().trim(),z=false;for(var aa=0;aa<t.length;aa++)if(y==t[aa].text.toLowerCase().trim()){z=true;break;}if(!z)t.push(this._createFreeFormNode(s));}var ba=t.length;for(var ca=0;ca<t.length;ca++)if(t[ca].uid==false)ba--;if(this.allowDedupe&&ba>1&&s.length>=3)t.push({text:"Mark Duplicate Results",type:'dupelink calltoaction'});return q.render.call(this,s,t,u);};r.prototype.selectDuplicates=function(s,t){"use strict";if(!t.selected.type.match('dupelink'))return;var u=[];for(var v=0;v<this.results.length;v++){if(this.results[v].uid==false)continue;u.push(this.results[v].uid);}var w=g.subscribe('typeahead/'+this.collectionID+'/confirmDupes',function(x,y){var z=this.results.map(function(ca){return ca.uid;});for(var aa=0;aa<y.dupe_ids.length;aa++){var ba=z.indexOf(y.dupe_ids[aa]);j.hide(this.items[ba]);}this.hasHiddenDupes=y.dupe_ids.length>0;}.bind(this));g.subscribe('typeahead/'+this.collectionID+'/finishDupes',function(x,y){g.unsubscribe(w);this.canHide=true;this.hasHiddenDupes&&j.hide(k.find(this.content,'.dupelink'));this.hasHiddenDupes=false;}.bind(this));this.canHide=false;new h('/ajax/typeahead/quality/duplicates').setData({ids:u,surface:m('collections_surface').value,collection_id:this.collectionID}).send();};r.initFreeformBoxes=function(){"use strict";var s=k.scry(document,'div.fbAddFormDialog')[0];if(!s)return;var t=k.find(s,'form');l.listen(t,'submit',function(){k.scry(t,'div.fbFreeformInput').forEach(function(u){if(k.find(u,'input.inputtext').value)j.addClass(u.firstChild,'selected');});});};n(r.prototype,{canHide:true,hasHiddenDupes:false});e.exports=r;},null);
__d("TypeaheadSetPhotoOnSelect",["CSS","DOM","Event","copyProperties"],function(a,b,c,d,e,f,g,h,i,j){function k(l){"use strict";this._typeahead=l;}k.prototype.enable=function(){"use strict";var l=h.scry(this._typeahead.getElement(),'.photo')[0];if(l){if(!h.isNodeOfType(l,'img')){var m=h.create('img',{className:l.className});h.replace(l,m);l=m;}var n=g.hide.bind(null,l),o=g.show.bind(null,l);this._eventListener=i.listen(l,{load:o,error:n,abort:n});this._subscription=this._typeahead.subscribe('select',function(p,q){var r=q.selected.photo||this._typeahead.view.fallbackPhoto;r?l.setAttribute('src',r):n();}.bind(this));}};k.prototype.disable=function(){"use strict";this._eventListener.remove();this._eventListener=null;this._typeahead.unsubscribe(this._subscription);this._subscription=null;};j(k.prototype,{_eventListener:null,_subscription:null});e.exports=k;},null);
__d("legacy:SetPhotoOnSelectTypeaheadBehavior",["TypeaheadSetPhotoOnSelect"],function(a,b,c,d,e,f,g){if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.setPhotoOnSelect=function(h){h.enableBehavior(g);};},3);
__d("TypeaheadPreventSubmitOnEnter",["Event","Keys","copyProperties"],function(a,b,c,d,e,f,g,h,i){function j(k){"use strict";this._typeahead=k;}j.prototype.enable=function(){"use strict";var k=this._typeahead.getCore().getElement();this._listener=g.listen(k,'keypress',function(l){if(g.getKeyCode(l)==h.RETURN)l.kill();});};j.prototype.disable=function(){"use strict";this._listener.remove();this._listener=null;};i(j.prototype,{_listener:null});e.exports=j;},null);
__d("TypeaheadShowResultsOnFocus",["Event","Keys","copyProperties"],function(a,b,c,d,e,f,g,h,i){function j(k){"use strict";this._typeahead=k;}j.prototype.enable=function(){"use strict";this._typeahead.getCore().resetOnKeyup=false;this._subscription=this._typeahead.subscribe('bootstrap',function(k,l){this.firstFetch(l,this._typeahead.getCore(),this._typeahead.getData());}.bind(this));this._keyUpListener=g.listen(this._typeahead.getCore().getElement(),'keyup',function(event){if(g.getKeyCode(event)==h.BACKSPACE||g.getKeyCode(event)==h.DELETE)this.respond(this._typeahead.getCore(),this._typeahead.getData());}.bind(this));this._focusListener=g.listen(this._typeahead.getCore().getElement(),'focus',function(event){this.respond(this._typeahead.getCore(),this._typeahead.getData());}.bind(this));};j.prototype.disable=function(){"use strict";this._typeahead.unsubscribe(this._subscription);this._subscription=null;this._keyUpListener.remove();this._keyUpListener=null;this._focusListener.remove();this._focusListener=null;};j.prototype.firstFetch=function(k,l,m){"use strict";!k.bootstrapping&&this.respond(l,m);};j.prototype.respond=function(k,l){"use strict";if(!k.getValue()){var m=this.getUidsFromData(l);k.setValue('');var n=l.buildUids(' ',m);l.respond('',n);}};j.prototype.getUidsFromData=function(k){"use strict";var l=k.getAllEntries(),m=[];for(var n in l)m.push({uid:l[n].uid,index:l[n].index});m.sort(function(o,p){return o.index-p.index;});return m.map(function(o){return o.uid;});};i(j.prototype,{_subscription:null,_keyUpListener:null,_focusListener:null});e.exports=j;},null);