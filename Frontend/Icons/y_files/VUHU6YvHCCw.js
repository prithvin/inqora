/*!CK:3868836!*//*1424828302,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ir668"]); }

__d("UFIMentionsInputProxy.react",["Bootloader","immutable","React","cx","emptyFunction","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.createClass({displayName:"UFIMentionsInputProxy",getInitialState:function(){return {cmdBuffer:h.List(),component:null};},componentDidMount:function(){if(this.props.initialData)this._bootload();},hasEnteredText:function(){return false;},focus:function(){this._fillCmdBuffer({fn:'focus',args:[]});},submitComment:function(event){this._fillCmdBuffer({fn:'submitComment',args:[event]});},insertMention:function(n){this._fillCmdBuffer({fn:'insertMention',args:[n]});},insertEmoticon:function(n){this._fillCmdBuffer({fn:'insertEmoticon',args:[n]});},_bootload:function(){g.loadModules(["UFIMentionsInput.react"],function(n){return this.setState({component:n});}.bind(this));},_focusAndLoad:function(){this._bootload();this.focus();},_hasBufferedCommands:function(){return this.state.cmdBuffer.size>0;},_fillCmdBuffer:function(n){if(this.refs.mentionsinputchild){this._execCmd(n);}else this.setState({cmdBuffer:this.state.cmdBuffer.push(n)});},_drainFnBuffer:function(){var n=this.state.cmdBuffer.first();this.setState({cmdBuffer:this.state.cmdBuffer.shift()});return n;},_execCmd:function(n){var o=this.refs.mentionsinputchild;o[n.fn].apply(o,n.args);},_renderProxyInput:function(){var n="_1osa mentionsHidden";return (i.createElement("input",{className:n,name:"add_comment_text",ref:"proxyInput",onFocus:this._focusAndLoad,tabIndex:"-1"}));},_renderDummy:function(){var n="UFIAddCommentInput _1osb _1osc";return (i.createElement("div",{onFocus:this._focusAndLoad,onClick:this._focusAndLoad,onTouchStart:k,onMouseOver:this._bootload},i.createElement("div",{className:n},this._renderProxyInput(),this.props.placeholder)));},render:function(){var n=this.state.component;if(!n)return this._renderDummy();if(this._hasBufferedCommands())l(function(){return this._execCmd(this._drainFnBuffer());}.bind(this));return (i.createElement(n,i.__spread({key:"mentionsinputchild",ref:"mentionsinputchild"},this.props),this.props.children));}});e.exports=m;},null);